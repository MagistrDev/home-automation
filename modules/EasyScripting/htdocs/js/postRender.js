function modulePostRender(z){function u(a,c,d){var b=null!=window.mozInnerScreenX;d=document.createElement("div");d.id="input-textarea-caret-position-mirror-div";document.body.appendChild(d);var f=d.style,h=window.getComputedStyle?window.getComputedStyle(a):a.currentStyle;f.whiteSpace="pre-wrap";f.wordWrap="break-word";f.position="absolute";f.visibility="hidden";"direction boxSizing width height overflowX overflowY borderTopWidth borderRightWidth borderBottomWidth borderLeftWidth borderStyle paddingTop paddingRight paddingBottom paddingLeft fontStyle fontVariant fontWeight fontStretch fontSize fontSizeAdjust lineHeight fontFamily textAlign textTransform textIndent textDecoration letterSpacing wordSpacing tabSize MozTabSize".split(" ").forEach(function(a){f[a]=
h[a]});b?a.scrollHeight>parseInt(h.height)&&(f.overflowY="scroll"):f.overflow="hidden";d.textContent=a.value.substring(0,c);b=document.createElement("span");b.textContent=a.value.substring(c)||".";d.appendChild(b);a={top:b.offsetTop+parseInt(h.borderTopWidth),left:b.offsetLeft+parseInt(h.borderLeftWidth),height:parseInt(h.lineHeight)};document.body.removeChild(d);return a}function v(a){$("#"+a+"-modal").remove();return $("<div></div>").attr("id",a+"-modal").attr("role","menu-modal").addClass("dropdown-menu-modal").click(function(a){$(this).css({display:"none"});
a=$(this).attr("id");a=a.substr(0,a.length-6);$("#"+a).css({display:"none"})})}function w(a){$("#"+a).remove();return $("<ul></ul>").attr("id",a).attr("role","menu").addClass("dropdown-menu")}function l(a){$("body").append(v(a+"-menu")).append(w(a+"-menu"))}function q(a,c){$("#"+a+"-menu").css({position:"fixed",display:"block",left:c.left+"px",top:c.top+"px"});$("#"+a+"-menu-modal").css({display:"block"})}function x(a,c,d){return a.attr("id",c).attr("context",c+"-menu").attr("openon",d).bind(d,function(a){a.preventDefault();
var b=this.getBoundingClientRect();q(c,{left:"mouseover"===d?b.right:a.clientX,top:"mouseover"===d?b.top:a.clientY})})}function r(a,c,d,b){$("#"+a+"-menu").append($("<li></li>").append($("<a></a>").text(d).click(function(){m(this);b(this)})).attr("id",a+"-menu-item-"+c))}function m(a){var c=a+"-menu";"string"!==typeof a&&(c=$(a).closest('[role="menu"]').attr("id"));$("#"+c).css({display:"none"});$("#"+c+"-modal").css({display:"none"})}function b(a,c,d,b){$("#"+a+"-menu").append($("<li></li>").append($("<a></a>").text(c).click(function(){m(this);
g(d,b)})))}function n(a){$("#"+a+"-menu").append($("<li></li>").addClass("divider"))}function p(a,c,b){$(".highlight-editor-holder .toolbar").append(x($("<li></li>").append($("<a></a>").append($("<i> "+b+"</i>").addClass("fa "+c))),a,"click"));l(a)}function y(){var a=e.get(0),c=a.selectionStart,b=a.value.substr(0,c).lastIndexOf("\n")+1;a=a.value.substr(b,c-b);c="";for(b=0;" "===(ch=a.substr(b,1))||"\t"===ch;)b++,c+=ch;"{"===a.substr(a.length-1,1)&&(c+="  ");return c}function g(a){var c=e.get(0),b=
c.selectionStart;a=a.split("\n").map(function(a,c){if(0===c)var b="";else{var d=e.get(0).selectionStart;d=e.val().substr(0,d);for(var f="",g=1;" "===(b=d.substr(-g,1))||"\t"===b;)g++,f=b+f;b=f}return b+a}).join("\n");e.setRangeText?e.setRangeText(a):(e.focus(),document.execCommand("insertText",!1,a));a=function(a){for(var c=0;c<k.length;c++){var b=a.indexOf(k[c]);if(-1!==b)return b}return-1}(a);-1!==a&&(c.selectionStart=a+b,c.selectionEnd=c.selectionStart+1);e.blur();e.focus()}function t(a){e.val(a+
e.val().trimEnd());g("\n")}if(window.chrome){$(".alpaca-field.alpaca-field-textarea textarea").addClass("editor allow-tabs").wrap($("<div></div>").addClass("scroller")).parent().append($("<pre></pre>").append($("<code></code>").addClass("syntax-highight javascript"))).wrap($("<div></div>").addClass("highlight-editor-holder")).parent().prepend($("<ul></ul>").addClass("toolbar"));p("easy-scripting-devices-events","fa-play","__m_events__");p("easy-scripting-devices-objects","fa-lightbulb-o","__m_devices__");
p("easy-scripting-syntax","fa-code","__m_expressions__");$.ajax("/ZAutomation/api/v1/devices").done(function(a){a.data.devices.sort(function(a,b){return a.metrics.title===b.metrics.title?a.id<b.id?-1:1:a.metrics.title<b.metrics.title?-1:1}).forEach(function(a){r("easy-scripting-devices-events",a.id,a.metrics.title+" ("+a.id+")",function(){t("### "+a.id+" // "+a.metrics.title+"\n")});r("easy-scripting-devices-objects",a.id,a.metrics.title+" ("+a.id+")",function(){g('vdev("'+a.id+'")')})})}).fail(function(){alert("no devices")});
var k=["\u229c","\u2299","\u2026"],e=$(".alpaca-field.alpaca-field-textarea textarea");l("easy-scripting-syntax");b("easy-scripting-syntax","__m_if__","if (\u229c) {\n  \u2026\n}");b("easy-scripting-syntax","__m_for_loop__","for (var i = 0; i < \u2299; i++) {\n  \u2026\n}");b("easy-scripting-syntax","__m_while_loop__","while (\u229c) {\n  \u2026\n}");n("easy-scripting-syntax");b("easy-scripting-syntax","__m_or__","\u229c || \u229c");b("easy-scripting-syntax","__m_and__","\u229c && \u229c");n("easy-scripting-syntax");
b("easy-scripting-syntax","__m_http_request__",'http.request({method: "GET", async: true, url: \u2299});');b("easy-scripting-syntax","__m_set_timeout__","setTimeout(function() {\n  \u2026\n}, \u2299*1000)");l("easy-scripting-device-methods");b("easy-scripting-device-methods","__m_turn_on__","on()");b("easy-scripting-device-methods","__m_turn_off__","off()");b("easy-scripting-device-methods","__m_turn_set__","set(\u2299)");n("easy-scripting-device-methods");b("easy-scripting-device-methods","__m_is_on__",
'value() === "on"');b("easy-scripting-device-methods","__m_is_off__",'value() === "off"');b("easy-scripting-device-methods","__m_equals__","value() === \u2299");b("easy-scripting-device-methods","__m_ne__","value() !== \u2299");b("easy-scripting-device-methods","__m_gt__","value() > \u2299");b("easy-scripting-device-methods","__m_ge__","value() >= \u2299");b("easy-scripting-device-methods","__m_lt__","value() < \u2299");b("easy-scripting-device-methods","__m_le__","value() <= \u2299");b("easy-scripting-device-methods",
"__m_value__","value()");$(e).click(function(){this.selectionStart===this.selectionEnd&&-1!==k.indexOf(this.value.substr(this.selectionStart,1))?this.selectionEnd=this.selectionStart+1:this.selectionStart===this.selectionEnd&&-1!==k.indexOf(this.value.substr(this.selectionStart-1,1))&&(this.selectionEnd=this.selectionStart,this.selectionStart--)});$(e).keypress(function(a){if("."===a.key){if(this.value.substr(0,this.selectionStart).match(/.*vdev\("[\w-]+"\)$/)){a=u(this,this.selectionEnd);var b=this.getBoundingClientRect();
a.top+=b.top+10;a.left+=b.left+10;q("easy-scripting-device-methods",a)}}else if("Enter"===a.key){var d=y();setTimeout(function(){g(d)},0)}else m("easy-scripting-device-methods")});document.querySelectorAll("pre code").forEach(function(a){hljs.highlightBlock(a)});t("")}else $(".alpaca-field.alpaca-field-textarea textarea").parent().prepend($("<div></div>").text("__h_unsupported__"))};