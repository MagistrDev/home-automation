function modulePostRender(z){function v(a,b,c){var g=null!=window.mozInnerScreenX;c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div";document.body.appendChild(c);var f=c.style,d=window.getComputedStyle?window.getComputedStyle(a):a.currentStyle;f.whiteSpace="pre-wrap";f.wordWrap="break-word";f.position="absolute";f.visibility="hidden";"direction boxSizing width height overflowX overflowY borderTopWidth borderRightWidth borderBottomWidth borderLeftWidth borderStyle paddingTop paddingRight paddingBottom paddingLeft fontStyle fontVariant fontWeight fontStretch fontSize fontSizeAdjust lineHeight fontFamily textAlign textTransform textIndent textDecoration letterSpacing wordSpacing tabSize MozTabSize".split(" ").forEach(function(a){f[a]=
d[a]});g?a.scrollHeight>parseInt(d.height)&&(f.overflowY="scroll"):f.overflow="hidden";c.textContent=a.value.substring(0,b);g=document.createElement("span");g.textContent=a.value.substring(b)||".";c.appendChild(g);a={top:g.offsetTop+parseInt(d.borderTopWidth),left:g.offsetLeft+parseInt(d.borderLeftWidth),height:parseInt(d.lineHeight)};document.body.removeChild(c);return a}function w(a){$("#"+a+"-modal").remove();return $("<div></div>").attr("id",a+"-modal").attr("role","menu-modal").addClass("dropdown-menu-modal").click(function(a){$(this).css({display:"none"});
a=$(this).attr("id");a=a.substr(0,a.length-6);$("#"+a).css({display:"none"})})}function x(a){$("#"+a).remove();return $("<ul></ul>").attr("id",a).attr("role","menu").addClass("dropdown-menu")}function l(a){$("body").append(w(a+"-menu")).append(x(a+"-menu"))}function p(a,b){$("#"+a+"-menu").css({position:"fixed",display:"block",left:b.left+"px",top:b.top+"px"});$("#"+a+"-menu-modal").css({display:"block"})}function q(a,b,c){return a.attr("id",b).attr("context",b+"-menu").attr("openon",c).bind(c,function(a){a.preventDefault();
var d=this.getBoundingClientRect();p(b,{left:"mouseover"===c?d.right:a.clientX,top:"mouseover"===c?d.top:a.clientY})})}function r(a,b,c,d){$("#"+a+"-menu").append($("<li></li>").append($("<a></a>").text(c).click(function(){m(this);d(this)})).attr("id",a+"-menu-item-"+b))}function m(a){var b=a+"-menu";"string"!==typeof a&&(b=$(a).closest('[role="menu"]').attr("id"));$("#"+b).css({display:"none"});$("#"+b+"-modal").css({display:"none"})}function d(a,b,c,d){$("#"+a+"-menu").append($("<li></li>").append($("<a></a>").text(b).click(function(){m(this);
h(c,d)})))}function n(a){$("#"+a+"-menu").append($("<li></li>").addClass("divider"))}function t(a,b,c){$(".highlight-editor-holder .toolbar").append(q($("<li></li>").append($("<a></a>").append($("<i> "+c+"</i>").addClass("fa "+b))),a,"click"));l(a)}function y(){var a=e.get(0),b=a.selectionStart,c=a.value.substr(0,b).lastIndexOf("\n")+1;a=a.value.substr(c,b-c);b="";for(c=0;" "===(ch=a.substr(c,1))||"\t"===ch;)c++,b+=ch;"{"===a.substr(a.length-1,1)&&(b+="  ");return b}function h(a){var b=e.get(0),c=
b.selectionStart;a=a.split("\n").map(function(a,b){if(0===b)var c="";else{var d=e.get(0).selectionStart;d=e.val().substr(0,d);for(var f="",g=1;" "===(c=d.substr(-g,1))||"\t"===c;)g++,f=c+f;c=f}return c+a}).join("\n");e.setRangeText?e.setRangeText(a):(e.focus(),document.execCommand("insertText",!1,a));a=function(a){for(var b=0;b<k.length;b++){var c=a.indexOf(k[b]);if(-1!==c)return c}return-1}(a);-1!==a&&(b.selectionStart=a+c,b.selectionEnd=b.selectionStart+1);e.blur();e.focus()}function u(a){e.val(a+
e.val().trimEnd());h("\n")}$(".alpaca-field.alpaca-field-textarea textarea").addClass("editor allow-tabs").wrap($("<div></div>").addClass("scroller")).parent().append($("<pre></pre>").append($("<code></code>").addClass("syntax-highight javascript"))).wrap($("<div></div>").addClass("highlight-editor-holder")).parent().prepend($("<ul></ul>").addClass("toolbar"));t("easy-scripting-devices-events","fa-play","Events");t("easy-scripting-devices-objects","fa-lightbulb-o","Devices");$(".highlight-editor-holder .toolbar").append(q($("<li></li>").append($("<a></a>").append($("<i> Expressions</i>").addClass("fa fa-code"))),
"easy-scripting-syntax","click"));l("easy-scripting-syntax");$.ajax("/ZAutomation/api/v1/devices").done(function(a){a.data.devices.forEach(function(a){r("easy-scripting-devices-events",a.id,a.metrics.title,function(){u("### "+a.id+" // "+a.metrics.title+"\n")});r("easy-scripting-devices-objects",a.id,a.metrics.title,function(){h('vdev("'+a.id+'")')})})}).fail(function(){alert("no devices")});var k=["\u229c","\u2299","\u2026"],e=$(".alpaca-field.alpaca-field-textarea textarea");d("easy-scripting-syntax",
"if","if (\u229c) {\n  \u2026\n}");d("easy-scripting-syntax","for loop","for (var i = 0; i < \u2299; i++) {\n  \u2026\n}");d("easy-scripting-syntax","while loop","while (\u229c) {\n  \u2026\n}");n("easy-scripting-syntax");d("easy-scripting-syntax","or","\u2299 || \u2299");d("easy-scripting-syntax","and","\u2299 && \u2299");n("easy-scripting-syntax");d("easy-scripting-syntax","HTTP request",'http.request({method: "GET", async: true, url: \u2299});');d("easy-scripting-syntax","Timer","var timer5sec = setTimeout(function() {\n  \u2299\n}, 5*1000)");
l("easy-scripting-device-methods");d("easy-scripting-device-methods","on","on()");d("easy-scripting-device-methods","off","off()");d("easy-scripting-device-methods","set","set(\u2299)");n("easy-scripting-device-methods");d("easy-scripting-device-methods","value","value()");d("easy-scripting-device-methods","value === on",'value() === "on"');d("easy-scripting-device-methods","value === off",'value() === "off"');d("easy-scripting-device-methods","value === ?","value() === \u2299");$(e).click(function(){this.selectionStart===
this.selectionEnd&&-1!==k.indexOf(this.value.substr(this.selectionStart,1))?this.selectionEnd=this.selectionStart+1:this.selectionStart===this.selectionEnd&&-1!==k.indexOf(this.value.substr(this.selectionStart-1,1))&&(this.selectionEnd=this.selectionStart,this.selectionStart--)});$(e).keypress(function(a){if("."===a.key){if(this.value.substr(0,this.selectionStart).match(/.*vdev\("[\w-]+"\)$/)){a=v(this,this.selectionEnd);var b=this.getBoundingClientRect();a.top+=b.top+10;a.left+=b.left+10;p("easy-scripting-device-methods",
a)}}else if("Enter"===a.key){var c=y();setTimeout(function(){h(c)},0)}else m("easy-scripting-device-methods")});document.querySelectorAll("pre code").forEach(function(a){hljs.highlightBlock(a)});u("")};